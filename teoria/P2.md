# <img src="https://julianodb.github.io/SISTEMAS_ELECTRONICOS_PARA_INGENIERIA_BIOMEDICA/img/logo_fing.png?raw=true" align="right" height="45"> Sistemas Electrónicos 2023/01
## Prueba Escrita 2

1. La Figura 1 muestra un sistema de control ON/OFF de temperatura de una incubadora, donde tanto $IC_1$ como $R_{heat}$ están mecanicamente conectados a ella. Cuando encendido, el calor generado en $R_{heat}$ sube la temperatura en la incubadora, mientras que cuando no hay corriente en $R_{heat}$, la incubadora se enfría naturalmente. $IC_1$ es un sensor de temperatura TMP236 de Texas Instruments que genera un voltaje proporcional a la temperatura, de acuerdo a la siguiente ecuación 

    $V_s = 400\ mV + \theta*19.5\ mV$

    Donde $\theta$ es la temperatura en grados celsius.

    <img src="https://julianodb.github.io/electronic_circuits_diagrams/temperature_control_1.png" width="300">

    Figura 1: Sistema de control de temperatura ON/OFF de una incubadora.

    Considerando que $V_{CC} = 5\ V$, $V_{set} = 1080\ mV $, $R_B = 680\ \Omega$, $\beta = 1000$, $V_{heat} = 10\ V$, $V_{CE_{SAT}} = 0.3\ V$ y $R_{heat} = 3\ \Omega$, determine $v_o$ y el calor entregado a la incubadora por $R_{heat}$ si la temperatura es (2pt):
    1. 0 °C
    1. 30 °C
    1. 35 °C
    1. 40 °C

2. Uno de los problemas con el control ON/OFF del ejercicio 1 es que el sistema "sobrerreacciona" a pequeños desvíos del punto de equilíbrio. Por ejemplo, si la temperatura es apenas un poco menor que la programada a través de $R_{pot}$, el transistor estará encendido al máximo, y se entregará la máxima corriente a $R_{heat}$, calentando la incubadora con la maxima capacidad de calor. Eso posiblemente causará que la temperatura sobrepase el punto de equilíbrio. El transistor, entonces, se apaga y la temperatura disminuye gradualmente. En algún momento, nuevamente la temperatura se hará un poco más pequeña que la de equilíbrio, y el ciclo se repite. Para evitar dicho problema, se puede hacer que la cantidad de calor entregada sea *proporcional* a qué tan lejos estamos del punto de equilíbrio. Es decir, si la temperatura es sólo un poco menor, entregar apenas un poco más de calor. Dicha estrategia, en control de sistemas, se conoce como control proporcional, o simplemente P. El circuito de la figura 2 implementa un control proporcional para la incubadora. 

    <img src="https://julianodb.github.io/electronic_circuits_diagrams/temperature_control_2.png" width="300"> 

    Figura 2: Sistema de control de temperatura proporcional de una incubadora.

    Considerando que $V_{CC} = 5\ V$, $V_{set} = 1080\ mV $, $R_B = 680\ \Omega$, $\beta = 1000$, $V_{heat} = 10\ V$, $V_{CE_{SAT}} = 0.3\ V$ y $R_{heat} = 3\ \Omega$, $R_1 = R_3 = 1\ k\Omega$ y $R_2 = R_4 = 47\ k\Omega$, encuentre: (2pt)
    1. una expresión para $v_o$ en función de $V_{s}$ y $V_{set}$.
    1. $v_o$ y el calor entregado a la incubadora por $R_{heat}$ si la temperatura es 34 °C

3. (2pt)

    <img src="https://julianodb.github.io/electronic_circuits_diagrams/temperature_control_3.png" width="300"> 

    Figura 3: Sistema de control de temperatura proporcional integrativo de una incubadora.

# Fórmulas
$$ H(s) = \frac{v_o(s)}{v_i(s)} $$
$$ A_v(\omega) = || H(s=j\omega) ||$$
$$ A_{v_{dB}}(\omega) = 20 log\left(|| H(j\omega) ||\right)$$
$$ \phi(\omega) = arg\left( H(j\omega) \right) = tan^{-1} \left( \frac{Im\{H(j\omega)\}}{Re\{H(j\omega)\}} \right)$$

- $k$: Constante de Boltzmann. $k=1.38 * 10^{-23}\enspace J/K$
- $q$: Carga del electrón. $q=1.6*10^{-19}\enspace C$
$$I_E = I_C + I_B$$
- en modo activo ($V_{CE} > V_{CE_{SAT}}$):
$$I_C = \beta I_B $$
- en modo saturado ($0 < \beta_{forzado} < \beta$):
$$V_{CE} = V_{CE_{SAT}}$$
$$I_C = \beta_{forzado} I_B $$
- modelo híbrido-$\pi$ de pequeñas señales:
$$r_{\pi} = \frac{\beta V_T}{I_{C_Q}}$$
$$i_{C_{AC}} = \beta i_{B_{AC}} $$
$$A_V = \frac{v_{o_{AC}}}{v_{i_{AC}}}$$
