# <img src="https://julianodb.github.io/SISTEMAS_ELECTRONICOS_PARA_INGENIERIA_BIOMEDICA/img/logo_fing.png?raw=true" align="right" height="45"> Trabajo 6 de Sistemas Electrónicos

#### Primer Semestre de 2025

## Introducción

Este semestre, su grupo es responsable de diseñar y fabricar un prototipo de fotopletismógrafo para aplicar los conocimientos y tecnicas relacionados a la asignatura de Sistemas Electrónicos.

A grandes rasgos, el prototipo debe tener las siguientes funcionalidades:

1. medir la frecuencia cardíaca (Heart Rate - HR)
1. emitir una señal de luz infrarroja cuando hay un pulso cardíaco
1. detectar la señal infraroja emitida por otro prototipo
1. medir el tiempo entre la detección de la señal infrarroja y el siguiente pulso cardíaco (Pulse Transit Time - PTT)
1. Permitir la visualización de los valores de HR y PTT medidos

El sistema que deben diseñar puede ser dividido en los siguientes bloques:

![TX](../img/TX.png)

Figura 1: División del sistema del fotopletismógrafo en bloques

En el sexto trabajo, los objetivos son los siguientes:

1. implementar el detector óptico y amplificador, los cuales producen la señal de fotopletismografía
1. implementar el filtro 1, el cual elimina la parte DC de la señal de fotopletismografía
1. mejorar el detector de peak utilizando un circuito de diodo ideal

El trabajo será un ensayo que debe contener la siguiente información:

- Identificación del grupo (color)
- Identificación de los integrantes del grupo (nombres, apellidos y RUT)
- La información que se pide en cada una de las siguientes sesiones de este documento

## 1. Detector Óptico y amplificador



<img src="https://julianodb.github.io/electronic_circuits_diagrams/T5_comp_pulse_gen.png" width="550">

Figura 2: Comparador en la entrada del generador de pulsos


## 2. Filtro 1



## 3. Detector de Peak parte 2

En el trabajo 3 estudiamos como se generará el valor de PTT: primero se produce una señal de pulsos de voltaje con la misma duración que el PTT, luego la utilizamos como entrada del integrador para producir una señal triangular que empieza en cero y sube a una velocidad constante mientras el pulso está en 5 V. Cuando el pulso baja a cero, la señal triangular también baja a cero

![T3_PTT](../img/T3_PTT.png)

Figura 9: Medición de PTT

De ésta forma, el valor maximo de la señal triangular será proporcional al valor de PTT. Finalmente, proyectamos el circuito detector de peak cuya salida es efectivamente dicho valor maximo.

<img src="https://julianodb.github.io/electronic_circuits_diagrams/peak_detector.png" width="200">

Figura 10: Peak detector

Sin embargo, el peak detector proyectado tiene una desventaja: el valor de $v_o$ no es exactamente $max\{v_i\}$, sino que $max\{v_i\} - V_F$, donde el $V_F$ del diodo utilizado es aproximadamente 0.7 V.

En este trabajo reemplazaremos $D_4$ por un circuito conocido como rectificador de precisión, que actúa como un diodo ideal con $V_F=0$.


Figura XX: Rectificador de precisión


Figura YY: Rectificador de media onda

17. Calculen $v_o$ en ambos circuitos cuando $v_i > 0$ y cuando $v_i < 0$ y comparenlos. Asuman

18. Calculen $v_x$ en el circuito rectificador de prescisión cuando $v_i > 0$ y considerando que el $V_F$ de $D_X$ es 0.7 V. Basandose en la respuesta, determinen cual es el mayor valor de $v_i$ con el cual el circuito actúa como un diodo ideal.

AYUDA: Analicen el caso $v_i >0$ y el caso $v_i <0$ por separado.

AYUDA2: Al igual que en el primer módulo de la asignatura, remuevan el diodo del circuito, analicen los voltajes resultantes y, de acuerdo a esto, determinen si el diodo conduce o no.

AYUDA3: Tanto cuando remueven el diodo cuanto después de determinar si está conduciendo o no, consideren si hay realimentación negativa para el amplificador operacional. Si no hay, este actua como un comparador. Si hay, pueden aplicar cortocircuito virtual.

Finalmente, el circuito final del peak detector se muestra a continuación:

<img src="https://julianodb.github.io/electronic_circuits_diagrams/precision_peak_detector.png" width="200">

Figura 10: Peak detector con rectificador de precisión


## Plazo de entrega: 23:59, 14 de Mayo de 2025

## Anexo

I. Valores de Resistencias disponibles:

|   |  |        |       |  |
|------|------|-----------|------------|-------|
| 10Ω  | 220Ω | 1kΩ       | 6.8kΩ      | 100kΩ |
| 22Ω  | 270Ω | 2kΩ       | 10kΩ       | 220kΩ |
| 47Ω  | 330Ω | 2.2kΩ     | 20kΩ       | 300kΩ |
| 100Ω | 470Ω | 3.3kΩ     | 47kΩ       | 470kΩ |
| 150Ω | 510Ω | 4.7kΩ     | 51kΩ       | 680kΩ |
| 200Ω | 680Ω | 5.1kΩ     | 68kΩ       | 1M    |

II. Valores de Capacitores Ceramicos disponibles:

|   |  |        |       |  |
|------|------|-----------|------------|-------|
| 100 pF  | 220 pF | 330 pF | 470 pF | 680 pF |
| 1 nF  | 2.2 nF | 3.3 nF | 4.7 nF | 6.8 nF |
| 10 nF  | 22 nF | 33 nF | 47 nF | 68 nF |
| $0.1\ \mu F$  | $0.22\ \mu F$ | $0.33\ \mu F$| $0.47\ \mu F$ | $0.68\ \mu F$ |
| $1\ \mu F$  | - | - | $4.7\ \mu F$ | - |
| $10\ \mu F$  | $22\ \mu F$ | - | - | - |