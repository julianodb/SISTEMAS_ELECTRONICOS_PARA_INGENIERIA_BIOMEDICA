# <img src="https://julianodb.github.io/SISTEMAS_ELECTRONICOS_PARA_INGENIERIA_BIOMEDICA/img/logo_fing.png?raw=true" align="right" height="45"> Trabajo 4 de Sistemas Electrónicos

#### Segundo Semestre de 2025

## Introducción

Este semestre, su grupo es responsable de diseñar y fabricar un prototipo de estetoscopio electrónico para aplicar los conocimientos y tecnicas relacionados a la asignatura de Sistemas Electrónicos.

El prototipo debe tener las siguientes funcionalidades:

1. Medir, amplificar, filtrar y reproducir los sonidos corporales
1. Permitir controlar el volúmen
1. Estimar y permitir la visualización de la frecuencia cardíaca (Heart Rate - HR)
1. Emitir una señal de luz cuando hay un pulso cardíaco

El sistema que deben diseñar puede ser dividido en los siguientes bloques:

![TX](../img/TX.png)

Figura 1: División del sistema del estetoscopio electrónico en bloques

En el cuarto trabajo, los objetivos son los siguientes:

1. Diseñar el circuito del Filtro 1
1. Mejorar el factor de amplificación del circuito

El trabajo será un ensayo que debe contener la siguiente información:

- Identificación del grupo (color)
- Identificación de los integrantes del grupo (nombres, apellidos y RUT)
- La información que se pide en cada una de las siguientes sesiones de este documento

## 1. Filtro 1

Durante las pruebas de los circuitos fabricados en el Laboratorio 3 se hicieron las siguientes observaciones sobre el sonido reproducido por el prototipo:
- el volúmen era bajo, incluso con la configuración de mayor nivel de amplificación
- se escuchaba mucho ruído

Se pueden mejorar ambos aspectos introduciendo el siguiente circuito (Filtro 1) entre la salida del control de volúmen y el amplificador de audio LM386:

<img src="https://julianodb.github.io/electronic_circuits_diagrams/sallen_key_low_2_samevalues_with_gain.png" width="400">

Figura 2: Circuito del Filtro 1

Determinen:

1. La función de transferencia del Filtro 1. (1pt)
1. Una fórmula para la ganancia de voltaje del Filtro 1 en función de la frecuencia de la señal ($A_V(\omega)$). (0.5pt)
1. Qué tipo de filtro está implementado. (0.5pt)
1. Una fórmula para la ganancia máxima ($max(A_V(\omega))$) y en qué frecuencia se obtiene dicha ganancia maxima. (0.5pt)
1. Una fórmula para la(s) frecuencia(s) de corte del filtro 1. (1pt)

Los sonidos del corazón están tipicamente en el rango de 20 Hz a 650 Hz, por lo que podemos inferir que señales con frecuencia mayor a 650 Hz probablemente son ruido. [1]

6. Elijan los valores de $R_4$, $R_5$, $R_{23}$, $R_{24}$, $C_2$ y $C_3$ de tal forma que (2pt):
    - $max(A_V(\omega)) = 2$
    - la frecuencia de corte es aproximadamente 650 Hz
    - ninguna resistencia es menor a $1\ k\Omega$
    - los valores de resistencias son valores disponibles en los anexos
    - los valores de capacitores son valores de capacitores **ceramicos** disponibles en los anexos

## 2. Mejorar el $A_V$ del circuito

Para mejorar el $A_V$ del circuito se analizará la interacción entre el micrófono y el Amplificador 1. Si ignoramos $C_1$, considerandolo un corto-circuito si la frecuencia es suficientemente alta, el circuito se simplifica de la siguiente forma:

<img src="https://julianodb.github.io/electronic_circuits_diagrams/T2_electret_amplify_first_try.png" width="300">

Figura 3: Circuito del micrófono + Amplificador 1 cuando $\omega \to \infty$

Además, podemos reemplazar el micrófono y $R_1$ por su equivalente de Thevenin:

<img src="https://julianodb.github.io/electronic_circuits_diagrams/electret_thevenin.png" width="400">

Figura 4: Equivalente de Thevenin del micrófono + $R_1$

Se obtiene:

<img src="https://julianodb.github.io/electronic_circuits_diagrams/T4_electret_thevenin.png" width="400">

Figura 5: Circuito del equivalente de Thevenin del micrófono + Amplificador 1 cuando $\omega \to \infty$

Así, es facil observar que:

$v_{o1} = -\frac{R_3}{R_1+R_2} v_s$

Se han elegido los valores de las resistencias para que $\frac{R_3}{R_2} \approx 20$, pero como $R_1$ tiene un valor cercano a $R_2$, el factor de amplificación real ($\frac{R_3}{R_1+R_2}$) es considerablemente menor a 20. 

7. Para cambiar el circuito de forma que $v_{o1}\approx 20 v_s$, elijan nuevos valores para $R_2$ y $R_3$ de tal forma que (0.5pt):
    - $R_2 \geq 10R_1$
    - $v_{o1} \approx 20 v_s$
    - NO cambien el valor de $R_1$
    - Los valores de las resistencias elegidas están disponibles en el anexo

## Plazo de entrega: 23:59, 06 de Octubre de 2025

[1] Rennert NJ, Morris R, Barrere CC. How to cope with scopes: Stethoscope Selection and use with hearing aids and Cls. Hear Rev. 2004;11:34–41

## Anexo

I. Valores de Resistencias disponibles:

|   |  |        |       |  |
|------|------|-----------|------------|-------|
| 10Ω  | 220Ω | 1kΩ       | 6.8kΩ      | 100kΩ |
| 22Ω  | 270Ω | 2kΩ       | 10kΩ       | 220kΩ |
| 47Ω  | 330Ω | 2.2kΩ     | 20kΩ       | 300kΩ |
| 100Ω | 470Ω | 3.3kΩ     | 47kΩ       | 470kΩ |
| 150Ω | 510Ω | 4.7kΩ     | 51kΩ       | 680kΩ |
| 200Ω | 680Ω | 5.1kΩ     | 68kΩ       | 1MΩ   |

II. Valores de Capacitores Ceramicos disponibles:

|   |  |        |       |  |  |
| -------- | ------- | ------- | ----------- | --------- | --------- |
| 100 pF   | 1 nF    | 10 nF   | $0.1\ \mu F$ | $1\ \mu F$  | $10\ \mu F$ |
| 220 pF   | 2.2 nF  | 22 nF   | $0.22\ \mu F$ | -         | $22\ \mu F$ |
| 330 pF   | 3.3 nF  | 33 nF   | $0.33\ \mu F$ | -         | -         |
| 470 pF   | 4.7 nF  | 47 nF   | $0.47\ \mu F$ | $4.7\ \mu F$| -         |
| 680 pF   | 6.8 nF  | 68 nF   | $0.68\ \mu F$ | -         | -         |